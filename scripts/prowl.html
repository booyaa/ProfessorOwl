<!doctype html>
<html>
  <head>
    <title>hai</title>
    <style>

	body {
   		font-family: "Times New Roman", Georgia, Serif;
	}

	#terminal {
		position: absolute; 
		height: 84%; 
		width: 98%; 
		margin: 0px;
	}

	#output {
   		font-family: "Times New Roman", Georgia, Serif;
   		font-size: 2em;
		width: 98%;
   		color: #2B1B17;
   		background: #FFFFFF;
	}
    </style>
    <link rel="icon" type="image/png" href="favicon.png">
  </head>
  <body>
    <h2>Professor Owl...</h2>
    <div id="output"></div>
    <div id="terminal"></div>

    <script src="./js/hterm.js"></script>
    <script src="./auth_token.js"></script>
    <script src="./js/gotty.js"></script>
	<script>
		document.addEventListener('DOMContentLoaded', function() {
		  document.getElementById('output').innerHTML = 'Waiting for the Professor...'
		  setInterval("delayedPost()", 1000)
		});


		function postAjax(url, success) {
			//source: https://plainjs.com/javascript/ajax/send-ajax-get-and-post-requests-47/
			var xhr = window.XMLHttpRequest ? new XMLHttpRequest() : new ActiveXObject("Microsoft.XMLHTTP");
			xhr.open('POST', url);
			xhr.onreadystatechange = function() {
				if (xhr.readyState>3 && xhr.status==200) { success(xhr.responseText); }
			};
			xhr.setRequestHeader('X-Requested-With', 'XMLHttpRequest');
			xhr.setRequestHeader('Content-Type', 'application/x-www-form-urlencoded');
			xhr.send('');
			return xhr;
		}

		function delayedPost() {
			postAjax('/getmessage', function(data) {
			console.log(data)
			document.getElementById('output').innerHTML = data
			})
		}
	 </script>
  </body>
</html>
